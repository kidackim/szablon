# ğŸš€ Szablon Automatyzacji TestÃ³w (E2E & API) â€“ Cypress + TypeScript
#### Wprowadzenie

- Ten projekt stanowi ustandaryzowany szablon (boilerplate) dla zestawÃ³w testÃ³w automatycznych End-to-End (E2E) oraz API, oparty na frameworku Cypress i jÄ™zyku TypeScript. Jego celem jest zapewnienie jednolitej, skalowalnej i Å‚atwej w utrzymaniu bazy testowej dla wszystkich nowych projektÃ³w w firmie.

- Szablon promuje najlepsze praktyki w zakresie testowania, takie jak separacja logiki testÃ³w (Page Object Pattern / API Object Pattern), wykorzystanie silnego typowania oraz zintegrowane raportowanie.

##### ğŸ› ï¸ Technologie

- Cypress GÅ‚Ã³wny framework do testÃ³w E2E i API.
- TypeScript JÄ™zyk programowania zapewniajÄ…cy bezpieczeÅ„stwo i czytelnoÅ›Ä‡ kodu.
- Node.js LTS (np. v20+) Åšrodowisko uruchomieniowe.
- npm/yarn MenedÅ¼er pakietÃ³w.
- ESLint NarzÄ™dzie do statycznej analizy kodu i utrzymania jednolitoÅ›ci stylu.

##### âš™ï¸ Wymagania i Instalacja
- Upewnij siÄ™, Å¼e masz zainstalowane Å›rodowisko Node.js w wersji LTS (zalecana) oraz menedÅ¼er pakietÃ³w npm lub Yarn.
- Sklonuj repozytorium, a nastÄ™pnie zainstaluj wszystkie wymagane pakiety:

```sh
# Klonowanie repozytorium
git clone <URL_REPOZYTORIUM>
cd <NAZWA_PROJEKTU>

# Instalacja zaleÅ¼noÅ›ci
npm install
# lub
yarn install
```

##### ğŸ“‚ Struktura Projektu (Konwencje)
Projekt jest zorganizowany zgodnie z najlepszymi praktykami Cypress, z dodatkowym naciskiem na architekturÄ™ testÃ³w:
- **cypress/e2e/**
-- GÅ‚Ã³wny katalog na pliki testowe. Pliki powinny mieÄ‡ rozszerzenie *.spec.ts.	Logika testÃ³w powinna byÄ‡ minimalna, koncentrujÄ…c siÄ™ na scenariuszach.
- **cypress/support/**
-- Katalog wspierajÄ…cy. Zawiera globalne ustawienia, wÅ‚asne komendy i pliki abstrakcji.	
- **cypress/support/api.ts**
-- API Object Layer. Abstrakcja warstwy komunikacji API. Zawiera metody do wykonywania requestÃ³w (np. postNewPost()).	API Object Pattern
- **cypress/support/commands.ts**
-- Plik na globalne, niestandardowe komendy Cypress (np. cy.loginAsUser()).	
- **cypress/support/utils/**
-- Funkcje pomocnicze, np. do generowania danych testowych (dataUtils.ts).	
- **cypress/fixtures/**
-- Dane wejÅ›ciowe (payloady JSON, dane uÅ¼ytkownikÃ³w). UÅ¼ywane do parametryzacji testÃ³w.	
- **cypress.config.ts**
-- GÅ‚Ã³wna konfiguracja Cypress (porty, zmienne Å›rodowiskowe, ustawienia raportowania).

##### â–¶ï¸ Uruchamianie TestÃ³w
Wszystkie komendy uruchamiania zdefiniowane sÄ… w pliku package.json.
##### Tryb Interaktywny (Open)
- Uruchamia Cypress Test Runner w trybie graficznym. Idealny do debugowania i tworzenia nowych testÃ³w.
```sh
npm run cypress:open
# lub
yarn cypress:open
```
##### Tryb Headless (Run)
- Uruchamia testy w wierszu poleceÅ„, bez interfejsu graficznego. Standardowy tryb dla potokÃ³w CI/CD. Wyniki sÄ… zapisywane w folderze cypress/results/.
```sh
npm run cypress:run
# lub
yarn cypress:run
```
##### Selektory Uruchomienia
Uruchomienie pojedynczego pliku testowego:
```sh
npx cypress run --spec "cypress/e2e/posts.spec.ts"
```
Uruchomienie testÃ³w w konkretnej przeglÄ…darce (np. Edge):
Åº
##### ğŸ“Š Raportowanie (JUnit)
Projekt jest skonfigurowany do generowania raportÃ³w w formacie JUnit XML, co jest standardem dla wiÄ™kszoÅ›ci systemÃ³w CI/CD (Jenkins, GitLab CI, Azure DevOps).
###### Lokalizacja RaportÃ³w
- Raporty sÄ… zapisywane w katalogu: cypress/results/junit/.

Po zakoÅ„czeniu przebiegu wszystkie pojedyncze pliki XML sÄ… Å‚Ä…czone w jeden: cypress/results/junit/merged.xml.

##### Integracja z CI/CD
- W potoku CI/CD naleÅ¼y skonfigurowaÄ‡ krok, ktÃ³ry bÄ™dzie odczytywaÅ‚ plik cypress/results/junit/merged.xml jako ÅºrÃ³dÅ‚o wynikÃ³w testÃ³w.

##### ğŸŒ Praca ZespoÅ‚owa i RozwÃ³j
Konwencje Kodowania
- Styl Kodu: Konfiguracja jest zarzÄ…dzana przez ESLint i wymusza spÃ³jny styl kodu TypeScript.
- Aliasy TypÃ³w: UÅ¼ywaj aliasÃ³w typÃ³w i interfejsÃ³w TypeScript w plikach wsparcia, aby unikaÄ‡ powielania struktur danych.

##### Przestrzeganie WzorcÃ³w
Nowe testy E2E i API muszÄ… przestrzegaÄ‡ zasad Page Object Pattern (dla interfejsu uÅ¼ytkownika) lub API Object Pattern (dla API).

###### PrzykÅ‚ad (API Object Pattern)

- Zamiast bezpoÅ›redniego wywoÅ‚ania w teÅ›cie:
```sh
// ZÅA PRAKTYKA: brak abstrakcji
it('tworzy post', () => {
  cy.request('POST', '/posts', newPostPayload);
});
```
UÅ¼yj abstrakcji z cypress/support/api.ts:
```sh
// DOBRA PRAKTYKA: uÅ¼ycie warstwy API
import { api } from '../support/api';

it('tworzy post', () => {
  api.postNewPost();
  // Weryfikacja
});
```